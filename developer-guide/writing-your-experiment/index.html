
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A guide for developing ROAR apps">
      
      
        <meta name="author" content="Adam Richie-Halford">
      
      
        <link rel="canonical" href="https://yeatmanlab.github.io/create-roar-app/developer-guide/writing-your-experiment/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.6">
    
    
      
        <title>Writing Your Experiment - ROAR Developer's Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M13.22 19.03a.75.75 0 0 0 1.06 0l6.25-6.25a.75.75 0 0 0 0-1.06l-6.25-6.25a.75.75 0 1 0-1.06 1.06l4.97 4.97H3.75a.75.75 0 0 0 0 1.5h14.44l-4.97 4.97a.75.75 0 0 0 0 1.06z"/></svg>');}</style>


    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="stanford" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#writing-your-experiment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ROAR Developer&#39;s Guide" class="md-header__button md-logo" aria-label="ROAR Developer's Guide" data-md-component="logo">
      
  <img src="../../assets/roar-icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROAR Developer's Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Writing Your Experiment
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/yeatmanlab/create-roar-app/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ROAR Developer&#39;s Guide" class="md-nav__button md-logo" aria-label="ROAR Developer's Guide" data-md-component="logo">
      
  <img src="../../assets/roar-icon.png" alt="logo">

    </a>
    ROAR Developer's Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/yeatmanlab/create-roar-app/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Developer Guide</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Developer Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prerequisites/" class="md-nav__link">
        Prerequisites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../folder-structure/" class="md-nav__link">
        Folder Structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Writing Your Experiment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Writing Your Experiment
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#starting-the-development-server" class="md-nav__link">
    Starting the development server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-another-block-of-stimuli" class="md-nav__link">
    Adding another block of stimuli
  </a>
  
    <nav class="md-nav" aria-label="Adding another block of stimuli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-more-images" class="md-nav__link">
    Adding more images
  </a>
  
    <nav class="md-nav" aria-label="Adding more images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hosting-images-alongside-your-experiment" class="md-nav__link">
    Hosting images alongside your experiment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hosting-images-using-a-cloud-storage-provider" class="md-nav__link">
    Hosting images using a cloud storage provider
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-block-of-stimuli-to-indexjs" class="md-nav__link">
    Adding a block of stimuli to index.js
  </a>
  
    <nav class="md-nav" aria-label="Adding a block of stimuli to index.js">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-single-stimulus" class="md-nav__link">
    Adding a single stimulus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-block-of-stimuli" class="md-nav__link">
    Adding a block of stimuli
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ending-the-experiment" class="md-nav__link">
    Ending the experiment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advice-for-asset-files" class="md-nav__link">
    Advice for asset files
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installing-dependencies/" class="md-nav__link">
        Installing Additional Dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../styling/" class="md-nav__link">
        Styling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploying-your-experiment/" class="md-nav__link">
        Deploying Your Experiment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../retrieving-data/" class="md-nav__link">
        Retrieving Data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Common Issues
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Common Issues" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Common Issues
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common-issues/asset-files/" class="md-nav__link">
        Advice For Asset Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../common-issues/audio-stimuli/" class="md-nav__link">
        Mobile Friendly Audio Stimuli
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#starting-the-development-server" class="md-nav__link">
    Starting the development server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-another-block-of-stimuli" class="md-nav__link">
    Adding another block of stimuli
  </a>
  
    <nav class="md-nav" aria-label="Adding another block of stimuli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-more-images" class="md-nav__link">
    Adding more images
  </a>
  
    <nav class="md-nav" aria-label="Adding more images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hosting-images-alongside-your-experiment" class="md-nav__link">
    Hosting images alongside your experiment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hosting-images-using-a-cloud-storage-provider" class="md-nav__link">
    Hosting images using a cloud storage provider
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-block-of-stimuli-to-indexjs" class="md-nav__link">
    Adding a block of stimuli to index.js
  </a>
  
    <nav class="md-nav" aria-label="Adding a block of stimuli to index.js">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-single-stimulus" class="md-nav__link">
    Adding a single stimulus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-block-of-stimuli" class="md-nav__link">
    Adding a block of stimuli
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ending-the-experiment" class="md-nav__link">
    Ending the experiment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advice-for-asset-files" class="md-nav__link">
    Advice for asset files
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/yeatmanlab/create-roar-app/blob/main/docs/docs/developer-guide/writing-your-experiment.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="writing-your-experiment">Writing your experiment<a class="headerlink" href="#writing-your-experiment" title="Permanent link">&para;</a></h1>
<p>Finally, let's stimulate our participant!</p>
<hr />
<h2 id="starting-the-development-server">Starting the development server<a class="headerlink" href="#starting-the-development-server" title="Permanent link">&para;</a></h2>
<p>Your ROAR app is ready to go out of the box. Let's start the development server to see what the experiment looks like in the browser.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">code only</label><label for="__tabbed_1_2">screencast</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>npm start
</code></pre></div>
</div>
<div class="tabbed-block">
<p><script id="asciicast-3BzroQXKrkJwROlvZPYSF3K8s" src="https://asciinema.org/a/3BzroQXKrkJwROlvZPYSF3K8s.js" async></script></p>
</div>
</div>
</div>
<p>This will automatically open a new browser tab with your experiment. It should look something like the <a href="https://create-roar-app-example.web.app/" target="_blank">experiment hosted here</a>:</p>
<p><a href="https://create-roar-app-example.web.app/" target="_blank"><img alt="A screenshot of the 2AFC ROAR template experiment" src="../../assets/hdnhd-template-screenshot.png" /></a></p>
<p>However, you're experiment will automatically update when you make changes to your source code.</p>
<h2 id="adding-another-block-of-stimuli">Adding another block of stimuli<a class="headerlink" href="#adding-another-block-of-stimuli" title="Permanent link">&para;</a></h2>
<p>Let's pretend that we want to add a new block to our experiment where we ask the participant to further differentiate between cats and dogs. Let's implement that structure now by first adding images of cats and dogs and then editing the experiment's source code to include those new images.</p>
<h3 id="adding-more-images">Adding more images<a class="headerlink" href="#adding-more-images" title="Permanent link">&para;</a></h3>
<p>The first step in creating our new block is hosting the images of dogs and cats that we will use as stimuli. Download these images to your computer</p>
<ul>
<li><a href="../../assets/block-2-images/cat.zip">cat.zip</a></li>
<li><a href="../../assets/block-2-images/dog.zip">dog.zip</a></li>
</ul>
<p>We will demonstrate two different ways to host images: we'll host the cat images along side your experiment and the dog images in a public google cloud storage bucket.</p>
<h4 id="hosting-images-alongside-your-experiment">Hosting images alongside your experiment<a class="headerlink" href="#hosting-images-alongside-your-experiment" title="Permanent link">&para;</a></h4>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">code only</label><label for="__tabbed_2_2">screencast</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>First download the <a href="../../assets/block-2-images/cat.zip">cat images zip file</a>. Assuming that this file was downloaded to <code>~/Downloads</code>, do</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Make a folder for the cat images</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>mkdir -p src/assets
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1"># Navigate to that folder</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="nb">cd</span> src/assets
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># Move the downloaded zip file to this folder</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>mv ~/Downloads/cat.zip .
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1"># Unzip the file</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>unzip cat.zip
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="c1"># And delete the zip file</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>rm cat.zip
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="nb">cd</span> ../..
</code></pre></div>
<p>Now edit the <code>src/loadAssets.js</code> file to load these new cat images. You can add individual files simply by importing them as variables and then referencing them in your code. For example</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/loadAssets.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span>
<span class="normal"><a href="#__codelineno-2-33">33</a></span>
<span class="normal"><a href="#__codelineno-2-34">34</a></span>
<span class="normal"><a href="#__codelineno-2-35">35</a></span>
<span class="normal"><a href="#__codelineno-2-36">36</a></span>
<span class="normal"><a href="#__codelineno-2-37">37</a></span>
<span class="normal"><a href="#__codelineno-2-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">import</span><span class="w"> </span><span class="nx">jsPsychPreload</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@jspsych/plugin-preload&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="nx">cat1</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./assets/cat/1.jpg&#39;</span><span class="p">;</span><span class="w"></span>
</span><a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="nx">cat2</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./assets/cat/2.jpg&#39;</span><span class="p">;</span><span class="w"></span>
</span><a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="nx">cat3</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./assets/cat/3.jpg&#39;</span><span class="p">;</span><span class="w"></span>
</span><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="nx">cat4</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./assets/cat/4.jpg&#39;</span><span class="p">;</span><span class="w"></span>
</span><a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="nx">cat5</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./assets/cat/5.jpg&#39;</span><span class="p">;</span><span class="w"></span>
</span><a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="hll">
</span><a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="hll"><span class="c1">// Reference these files in a new array</span><span class="w"></span>
</span><a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">catImages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">cat1</span><span class="p">,</span><span class="w"> </span><span class="nx">cat2</span><span class="p">,</span><span class="w"> </span><span class="nx">cat3</span><span class="p">,</span><span class="w"> </span><span class="nx">cat4</span><span class="p">,</span><span class="w"> </span><span class="nx">cat5</span><span class="p">];</span><span class="w"></span>
</span><a id="__codelineno-2-11" name="__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="c1">// Create arrays of hot dog / not hot dog images</span><span class="w"></span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="kd">const</span><span class="w"> </span><span class="nx">numFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="kd">const</span><span class="w"> </span><span class="nx">hotDogFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="nx">numFiles</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">  </span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`https://storage.googleapis.com/roar-hot-dog-images/hotdog/</span><span class="si">${</span><span class="nx">idx</span><span class="si">}</span><span class="sb">.jpg`</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="p">);</span><span class="w"></span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="kd">const</span><span class="w"> </span><span class="nx">notHotDogFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="nx">numFiles</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">  </span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`https://storage.googleapis.com/roar-hot-dog-images/nothotdog/</span><span class="si">${</span><span class="nx">idx</span><span class="si">}</span><span class="sb">.jpg`</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="p">);</span><span class="w"></span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="kd">const</span><span class="w"> </span><span class="nx">allFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">hotDogFiles</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">notHotDogFiles</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">allTargets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">allFiles</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">url</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="w"></span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="w">  </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="sb">`&lt;img src=&quot;</span><span class="si">${</span><span class="nx">url</span><span class="si">}</span><span class="sb">&quot; width=250 height=250&gt;`</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="w">  </span><span class="nx">isHotDog</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="nx">url</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;nothotdog&#39;</span><span class="p">),</span><span class="w"></span>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="p">}));</span><span class="w"></span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="cm">/* preload images */</span><span class="w"></span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">preloadImages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychPreload</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="w">  </span><span class="nx">images</span><span class="o">:</span><span class="w"> </span><span class="nx">allFiles</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a><span class="p">};</span><span class="w"></span>
<a id="__codelineno-2-33" name="__codelineno-2-33"></a>
<a id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="hll"><span class="c1">// Preload the cat image</span><span class="w"></span>
</span><a id="__codelineno-2-35" name="__codelineno-2-35"></a><span class="hll"><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">preloadCatImages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><a id="__codelineno-2-36" name="__codelineno-2-36"></a><span class="hll"><span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychPreload</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-2-37" name="__codelineno-2-37"></a><span class="hll"><span class="w">  </span><span class="nx">images</span><span class="o">:</span><span class="w"> </span><span class="nx">catImages</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-2-38" name="__codelineno-2-38"></a><span class="hll"><span class="p">}</span><span class="w"></span>
</span></code></pre></div></td></tr></table></div>
<p>And don't forget to commit your changes into git.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>git add src/assets/cat
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>git add -u
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>git commit -m <span class="s2">&quot;Add cat images for block 2&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p><script id="asciicast-mcEQabC4s6YIvnr1fYz6XdILP" src="https://asciinema.org/a/mcEQabC4s6YIvnr1fYz6XdILP.js" async></script></p>
</div>
</div>
</div>
<h4 id="hosting-images-using-a-cloud-storage-provider">Hosting images using a cloud storage provider<a class="headerlink" href="#hosting-images-using-a-cloud-storage-provider" title="Permanent link">&para;</a></h4>
<p>The above method of hosting image assets alongside your experiment is fine if you only have a few files. But it can become cumbersome to import each file separately if you have a lot of assets. Rather than hosting your files with your website, you can upload them to a cloud storage provider and access your files using a URL. To demonstrate, we have already uploaded the dog images to a Google Cloud Storage bucket. In fact, it is the same bucket that already hosts the hot dog vs. not hot dog images. You can see the images here
(<a href="https://storage.googleapis.com/roar-hot-dog-images/dog/1.jpg" target="_blank">1</a>,
<a href="https://storage.googleapis.com/roar-hot-dog-images/dog/2.jpg" target="_blank">2</a>,
<a href="https://storage.googleapis.com/roar-hot-dog-images/dog/3.jpg" target="_blank">3</a>,
<a href="https://storage.googleapis.com/roar-hot-dog-images/dog/4.jpg" target="_blank">4</a>,
<a href="https://storage.googleapis.com/roar-hot-dog-images/dog/5.jpg" target="_blank">5</a>).</p>
<p>Two popular cloud storage service providers are Google Cloud Storage (GCS) and Amazon Simple Storage Service (S3). To upload your own images and make them publicly available, follow these instructions:</p>
<ul>
<li>Create a storage bucket (<a href="https://cloud.google.com/storage/docs/creating-buckets">GCS instructions</a>, <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html">S3 instructions</a>)</li>
<li>Upload objects to the bucket (<a href="https://cloud.google.com/storage/docs/uploading-objects">GCS instructions</a>, <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/upload-objects.html">S3 instructions</a>)</li>
<li>Make the data public (<a href="https://cloud.google.com/storage/docs/access-control/making-data-public">GCS instructions</a>, <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/WebsiteAccessPermissionsReqd.html">S3 instructions</a>)</li>
</ul>
<p>Then we can add references to the dog image URLs like so</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">code only</label><label for="__tabbed_3_2">screencast</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Edit the <code>src/loadAssets.js</code> file to include the dog image URLs</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/loadAssets.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span>
<span class="normal"><a href="#__codelineno-4-28">28</a></span>
<span class="normal"><a href="#__codelineno-4-29">29</a></span>
<span class="normal"><a href="#__codelineno-4-30">30</a></span>
<span class="normal"><a href="#__codelineno-4-31">31</a></span>
<span class="normal"><a href="#__codelineno-4-32">32</a></span>
<span class="normal"><a href="#__codelineno-4-33">33</a></span>
<span class="normal"><a href="#__codelineno-4-34">34</a></span>
<span class="normal"><a href="#__codelineno-4-35">35</a></span>
<span class="normal"><a href="#__codelineno-4-36">36</a></span>
<span class="normal"><a href="#__codelineno-4-37">37</a></span>
<span class="normal"><a href="#__codelineno-4-38">38</a></span>
<span class="normal"><a href="#__codelineno-4-39">39</a></span>
<span class="normal"><a href="#__codelineno-4-40">40</a></span>
<span class="normal"><a href="#__codelineno-4-41">41</a></span>
<span class="normal"><a href="#__codelineno-4-42">42</a></span>
<span class="normal"><a href="#__codelineno-4-43">43</a></span>
<span class="normal"><a href="#__codelineno-4-44">44</a></span>
<span class="normal"><a href="#__codelineno-4-45">45</a></span>
<span class="normal"><a href="#__codelineno-4-46">46</a></span>
<span class="normal"><a href="#__codelineno-4-47">47</a></span>
<span class="normal"><a href="#__codelineno-4-48">48</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">import</span><span class="w"> </span><span class="nx">jsPsychPreload</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@jspsych/plugin-preload&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="k">import</span><span class="w"> </span><span class="nx">cat1</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./assets/cat/1.jpg&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="k">import</span><span class="w"> </span><span class="nx">cat2</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./assets/cat/2.jpg&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="k">import</span><span class="w"> </span><span class="nx">cat3</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./assets/cat/3.jpg&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="k">import</span><span class="w"> </span><span class="nx">cat4</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./assets/cat/4.jpg&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="k">import</span><span class="w"> </span><span class="nx">cat5</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./assets/cat/5.jpg&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="c1">// Reference these files in a new array</span><span class="w"></span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="kd">const</span><span class="w"> </span><span class="nx">catImages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">cat1</span><span class="p">,</span><span class="w"> </span><span class="nx">cat2</span><span class="p">,</span><span class="w"> </span><span class="nx">cat3</span><span class="p">,</span><span class="w"> </span><span class="nx">cat4</span><span class="p">,</span><span class="w"> </span><span class="nx">cat5</span><span class="p">];</span><span class="w"></span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="c1">// Create arrays of hot dog / not hot dog images</span><span class="w"></span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="kd">const</span><span class="w"> </span><span class="nx">numFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="kd">const</span><span class="w"> </span><span class="nx">hotDogFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="nx">numFiles</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">  </span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`https://storage.googleapis.com/roar-hot-dog-images/hotdog/</span><span class="si">${</span><span class="nx">idx</span><span class="si">}</span><span class="sb">.jpg`</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="p">);</span><span class="w"></span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="kd">const</span><span class="w"> </span><span class="nx">notHotDogFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="nx">numFiles</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">  </span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`https://storage.googleapis.com/roar-hot-dog-images/nothotdog/</span><span class="si">${</span><span class="nx">idx</span><span class="si">}</span><span class="sb">.jpg`</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="p">);</span><span class="w"></span>
<a id="__codelineno-4-21" name="__codelineno-4-21"></a>
<a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">dogFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="nx">numFiles</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="w"></span>
</span><a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="hll"><span class="w">  </span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`https://storage.googleapis.com/roar-hot-dog-images/dog/</span><span class="si">${</span><span class="nx">idx</span><span class="si">}</span><span class="sb">.jpg`</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="hll"><span class="p">);</span><span class="w"></span>
</span><a id="__codelineno-4-25" name="__codelineno-4-25"></a>
<a id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="kd">const</span><span class="w"> </span><span class="nx">allFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">hotDogFiles</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">notHotDogFiles</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">allTargets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">allFiles</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">url</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="w"></span>
<a id="__codelineno-4-28" name="__codelineno-4-28"></a><span class="w">  </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="sb">`&lt;img src=&quot;</span><span class="si">${</span><span class="nx">url</span><span class="si">}</span><span class="sb">&quot; width=250 height=250&gt;`</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-4-29" name="__codelineno-4-29"></a><span class="w">  </span><span class="nx">isHotDog</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="nx">url</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;nothotdog&#39;</span><span class="p">),</span><span class="w"></span>
<a id="__codelineno-4-30" name="__codelineno-4-30"></a><span class="p">}));</span><span class="w"></span>
<a id="__codelineno-4-31" name="__codelineno-4-31"></a>
<a id="__codelineno-4-32" name="__codelineno-4-32"></a><span class="cm">/* preload images */</span><span class="w"></span>
<a id="__codelineno-4-33" name="__codelineno-4-33"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">preloadImages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-4-34" name="__codelineno-4-34"></a><span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychPreload</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-4-35" name="__codelineno-4-35"></a><span class="w">  </span><span class="nx">images</span><span class="o">:</span><span class="w"> </span><span class="nx">allFiles</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-4-36" name="__codelineno-4-36"></a><span class="p">};</span><span class="w"></span>
<a id="__codelineno-4-37" name="__codelineno-4-37"></a>
<a id="__codelineno-4-38" name="__codelineno-4-38"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">block2Files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">catImages</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">dogFiles</span><span class="p">);</span><span class="w"></span>
</span><a id="__codelineno-4-39" name="__codelineno-4-39"></a><span class="hll"><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">block2Targets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">block2Files</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">url</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="w"></span>
</span><a id="__codelineno-4-40" name="__codelineno-4-40"></a><span class="hll"><span class="w">  </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="sb">`&lt;img src=&quot;</span><span class="si">${</span><span class="nx">url</span><span class="si">}</span><span class="sb">&quot; width=250 height=250&gt;`</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-4-41" name="__codelineno-4-41"></a><span class="hll"><span class="w">  </span><span class="nx">isDog</span><span class="o">:</span><span class="w"> </span><span class="nx">url</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;dog&#39;</span><span class="p">),</span><span class="w"></span>
</span><a id="__codelineno-4-42" name="__codelineno-4-42"></a><span class="hll"><span class="p">}));</span><span class="w"></span>
</span><a id="__codelineno-4-43" name="__codelineno-4-43"></a><span class="hll">
</span><a id="__codelineno-4-44" name="__codelineno-4-44"></a><span class="hll"><span class="c1">// Preload the cat/dog images</span><span class="w"></span>
</span><a id="__codelineno-4-45" name="__codelineno-4-45"></a><span class="hll"><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">preloadBlock2Images</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><a id="__codelineno-4-46" name="__codelineno-4-46"></a><span class="hll"><span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychPreload</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-4-47" name="__codelineno-4-47"></a><span class="hll"><span class="w">  </span><span class="nx">images</span><span class="o">:</span><span class="w"> </span><span class="nx">block2Files</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-4-48" name="__codelineno-4-48"></a><span class="hll"><span class="p">};</span><span class="w"></span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<p><script id="asciicast-CilcYmBcElKbDsCpNLZiK4i5T" src="https://asciinema.org/a/CilcYmBcElKbDsCpNLZiK4i5T.js" async></script></p>
</div>
</div>
</div>
<details class="info">
<summary>Making sense of the above javascript</summary>
<p>If the above line of javascript for <code>dogFiles</code> doesn't make sense to you, let's break it down into its components:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">Array</span><span class="p">(</span><span class="nx">numFiles</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c1">// Yields [ &lt;5 empty items&gt; ] since numFiles = 5</span><span class="w"></span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="nx">numFiles</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="c1">// Yields [ 1, 2, 3, 4, 5 ]</span><span class="w"></span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="c1">// And Finally</span><span class="w"></span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="nx">numFiles</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">  </span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`https://storage.googleapis.com/roar-hot-dog-images/dog/</span><span class="si">${</span><span class="nx">idx</span><span class="si">}</span><span class="sb">.jpg`</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="p">);</span><span class="w"></span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="c1">// Yields</span><span class="w"></span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="c1">// [</span><span class="w"></span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="c1">//   &#39;https://storage.googleapis.com/roar-hot-dog-images/dog/1.jpg&#39;,</span><span class="w"></span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="c1">//   &#39;https://storage.googleapis.com/roar-hot-dog-images/dog/2.jpg&#39;,</span><span class="w"></span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="c1">//   &#39;https://storage.googleapis.com/roar-hot-dog-images/dog/3.jpg&#39;,</span><span class="w"></span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="c1">//   &#39;https://storage.googleapis.com/roar-hot-dog-images/dog/4.jpg&#39;,</span><span class="w"></span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="c1">//   &#39;https://storage.googleapis.com/roar-hot-dog-images/dog/5.jpg&#39;</span><span class="w"></span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="c1">// ]</span><span class="w"></span>
</code></pre></div>
<p>By using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">map method</a>, we were able to write the URL pattern just once, following the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY principle</a>. We use the map method again to convert the raw URLs in the <code>dogImages</code> array to HTML image tags in the <code>block2Targets</code> array.</p>
</details>
<h3 id="adding-a-block-of-stimuli-to-indexjs">Adding a block of stimuli to <code>index.js</code><a class="headerlink" href="#adding-a-block-of-stimuli-to-indexjs" title="Permanent link">&para;</a></h3>
<p>Now that we have established references to our new cat vs. dog images, let's create the new block of stimuli. We'll introduce this first by adding only one single stimulus. and then we'll use the same code to add an entire block of stimuli using jsPsych's timeline variables.</p>
<h4 id="adding-a-single-stimulus">Adding a single stimulus<a class="headerlink" href="#adding-a-single-stimulus" title="Permanent link">&para;</a></h4>
<p>We will add the first stimulus in the <code>block2Targets</code> array.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">code only</label><label for="__tabbed_4_2">screencast</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Edit the <code>src/index.js</code> file to include a new instruction set and the new stimuli.</p>
<p>At the top of the file, add the following imports</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/index.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="c1">// Local modules</span><span class="w"></span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">initConfig</span><span class="p">,</span><span class="w"> </span><span class="nx">initRoarJsPsych</span><span class="p">,</span><span class="w"> </span><span class="nx">initRoarTimeline</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./config&#39;</span><span class="p">;</span><span class="w"></span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">allTargets</span><span class="p">,</span><span class="w"> </span><span class="nx">preloadImages</span><span class="p">,</span><span class="w"> </span><span class="nx">block2Targets</span><span class="p">,</span><span class="w"> </span><span class="nx">preloadBlock2Images</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./loadAssets&#39;</span><span class="p">;</span><span class="w"></span>
</span></code></pre></div></td></tr></table></div>
<p>Then, a little bit later in the file, add</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/index.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-7-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-7-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-7-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-7-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-7-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-7-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-7-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-7-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-7-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-7-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-7-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-7-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-7-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-7-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-7-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-7-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-7-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-7-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-7-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-7-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-7-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-7-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-7-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-7-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-7-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-7-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-7-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-7-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-7-100">100</a></span>
<span class="normal"><a href="#__codelineno-7-101">101</a></span>
<span class="normal"><a href="#__codelineno-7-102">102</a></span>
<span class="normal"><a href="#__codelineno-7-103">103</a></span>
<span class="normal"><a href="#__codelineno-7-104">104</a></span>
<span class="normal"><a href="#__codelineno-7-105">105</a></span>
<span class="normal"><a href="#__codelineno-7-106">106</a></span>
<span class="normal"><a href="#__codelineno-7-107">107</a></span>
<span class="normal"><a href="#__codelineno-7-108">108</a></span>
<span class="normal"><a href="#__codelineno-7-109">109</a></span>
<span class="normal"><a href="#__codelineno-7-110">110</a></span>
<span class="normal"><a href="#__codelineno-7-111">111</a></span>
<span class="normal"><a href="#__codelineno-7-112">112</a></span>
<span class="normal"><a href="#__codelineno-7-113">113</a></span>
<span class="normal"><a href="#__codelineno-7-114">114</a></span>
<span class="normal"><a href="#__codelineno-7-115">115</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-71" name="__codelineno-7-71"></a><span class="nx">timeline</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">hotDogTrials</span><span class="p">);</span><span class="w"></span>
<a id="__codelineno-7-72" name="__codelineno-7-72"></a>
<a id="__codelineno-7-73" name="__codelineno-7-73"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">block2Instructions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><a id="__codelineno-7-74" name="__codelineno-7-74"></a><span class="hll"><span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychHtmlKeyboardResponse</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-7-75" name="__codelineno-7-75"></a><span class="hll"><span class="w">  </span><span class="nx">stimulus</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span>
</span><a id="__codelineno-7-76" name="__codelineno-7-76"></a><span class="hll"><span class="sb">    &lt;h3&gt;Great Job!&lt;/h3&gt;</span>
</span><a id="__codelineno-7-77" name="__codelineno-7-77"></a><span class="hll"><span class="sb">    &lt;p&gt;</span>
</span><a id="__codelineno-7-78" name="__codelineno-7-78"></a><span class="hll"><span class="sb">      Now press the right arrow key if the displayed image is of a dog.</span>
</span><a id="__codelineno-7-79" name="__codelineno-7-79"></a><span class="hll"><span class="sb">      Press the left arrow key if the displayed image is of a cat.</span>
</span><a id="__codelineno-7-80" name="__codelineno-7-80"></a><span class="hll"><span class="sb">    &lt;/p&gt;</span>
</span><a id="__codelineno-7-81" name="__codelineno-7-81"></a><span class="hll"><span class="sb">    &lt;p&gt;Press any key to continue.&lt;/p&gt;</span>
</span><a id="__codelineno-7-82" name="__codelineno-7-82"></a><span class="hll"><span class="sb">    `</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-7-83" name="__codelineno-7-83"></a><span class="hll"><span class="p">};</span><span class="w"></span>
</span><a id="__codelineno-7-84" name="__codelineno-7-84"></a><span class="hll">
</span><a id="__codelineno-7-85" name="__codelineno-7-85"></a><span class="hll"><span class="nx">timeline</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">preloadBlock2Images</span><span class="p">);</span><span class="w"></span>
</span><a id="__codelineno-7-86" name="__codelineno-7-86"></a><span class="hll"><span class="nx">timeline</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">block2Instructions</span><span class="p">);</span><span class="w"></span>
</span><a id="__codelineno-7-87" name="__codelineno-7-87"></a><span class="hll">
</span><a id="__codelineno-7-88" name="__codelineno-7-88"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">catDogTrials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><a id="__codelineno-7-89" name="__codelineno-7-89"></a><span class="hll"><span class="w">  </span><span class="nx">timeline</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
</span><a id="__codelineno-7-90" name="__codelineno-7-90"></a><span class="hll"><span class="w">    </span><span class="p">{</span><span class="w"></span>
</span><a id="__codelineno-7-91" name="__codelineno-7-91"></a><span class="hll"><span class="w">      </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychHtmlKeyboardResponse</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-7-92" name="__codelineno-7-92"></a><span class="hll"><span class="w">      </span><span class="nx">stimulus</span><span class="o">:</span><span class="w"> </span><span class="sb">`&lt;div style=&quot;font-size: 60px;&quot;&gt;+&lt;/div&gt;`</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-7-93" name="__codelineno-7-93"></a><span class="hll"><span class="w">      </span><span class="nx">choices</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;NO_KEYS&#39;</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-7-94" name="__codelineno-7-94"></a><span class="hll"><span class="w">      </span><span class="nx">trial_duration</span><span class="o">:</span><span class="w"> </span><span class="mf">500</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-7-95" name="__codelineno-7-95"></a><span class="hll"><span class="w">    </span><span class="p">},</span><span class="w"></span>
</span><a id="__codelineno-7-96" name="__codelineno-7-96"></a><span class="hll"><span class="w">    </span><span class="p">{</span><span class="w"></span>
</span><a id="__codelineno-7-97" name="__codelineno-7-97"></a><span class="hll"><span class="w">      </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychHtmlKeyboardResponse</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-7-98" name="__codelineno-7-98"></a><span class="hll"><span class="w">      </span><span class="nx">stimulus</span><span class="o">:</span><span class="w"> </span><span class="nx">block2Targets</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">target</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-7-99" name="__codelineno-7-99"></a><span class="hll"><span class="w">      </span><span class="nx">choices</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;ArrowLeft&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ArrowRight&#39;</span><span class="p">],</span><span class="w"></span>
</span><a id="__codelineno-7-100" name="__codelineno-7-100"></a><span class="hll"><span class="w">      </span><span class="nx">prompt</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span>
</span><a id="__codelineno-7-101" name="__codelineno-7-101"></a><span class="hll"><span class="sb">        &lt;p&gt;Is this a cat or a dog?&lt;/p&gt;</span>
</span><a id="__codelineno-7-102" name="__codelineno-7-102"></a><span class="hll"><span class="sb">        &lt;p&gt;If cat, press the left arrow key.&lt;/p&gt;</span>
</span><a id="__codelineno-7-103" name="__codelineno-7-103"></a><span class="hll"><span class="sb">        &lt;p&gt;If dog, press the right arrow key.&lt;/p&gt;</span>
</span><a id="__codelineno-7-104" name="__codelineno-7-104"></a><span class="hll"><span class="sb">        `</span><span class="w"></span>
</span><a id="__codelineno-7-105" name="__codelineno-7-105"></a><span class="hll"><span class="w">      </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><a id="__codelineno-7-106" name="__codelineno-7-106"></a><span class="hll"><span class="w">        </span><span class="c1">// Here is where we specify that we should save the trial to Firestore</span><span class="w"></span>
</span><a id="__codelineno-7-107" name="__codelineno-7-107"></a><span class="hll"><span class="w">        </span><span class="nx">save_trial</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-7-108" name="__codelineno-7-108"></a><span class="hll"><span class="w">        </span><span class="c1">// Here we can also specify additional information that we would like stored</span><span class="w"></span>
</span><a id="__codelineno-7-109" name="__codelineno-7-109"></a><span class="hll"><span class="w">        </span><span class="c1">// in this trial in ROAR&#39;s Firestore database.</span><span class="w"></span>
</span><a id="__codelineno-7-110" name="__codelineno-7-110"></a><span class="hll"><span class="w">      </span><span class="p">},</span><span class="w"></span>
</span><a id="__codelineno-7-111" name="__codelineno-7-111"></a><span class="hll"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><a id="__codelineno-7-112" name="__codelineno-7-112"></a><span class="hll"><span class="w">  </span><span class="p">]</span><span class="w"></span>
</span><a id="__codelineno-7-113" name="__codelineno-7-113"></a><span class="hll"><span class="p">};</span><span class="w"></span>
</span><a id="__codelineno-7-114" name="__codelineno-7-114"></a><span class="hll">
</span><a id="__codelineno-7-115" name="__codelineno-7-115"></a><span class="hll"><span class="nx">timeline</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">catDogTrials</span><span class="p">);</span><span class="w"></span>
</span></code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<p><script id="asciicast-Fae6hjgPoGTYK98ISwIyYZ5nQ" src="https://asciinema.org/a/Fae6hjgPoGTYK98ISwIyYZ5nQ.js" async></script></p>
</div>
</div>
</div>
<h4 id="adding-a-block-of-stimuli">Adding a block of stimuli<a class="headerlink" href="#adding-a-block-of-stimuli" title="Permanent link">&para;</a></h4>
<p>We just added one single stimulus. It would be really annoying to have to write all that code over and over just to add the next nine stimuli for this block. Luckily, jsPsych has <a href="https://www.jspsych.org/7.0/overview/timeline/#timeline-variables" target="_blank">timeline variables</a> to make this easier. In fact, the hot dog vs. not hot dog block already uses this technology. Let's add the other dog vs. cat stimuli using timeline variables with random sampling.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">code only</label><label for="__tabbed_5_2">screencast</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Edit the <code>catVsDogTrials</code> in the <code>src/index.js</code> file so that it reads:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/index.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-8-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-8-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-8-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-8-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-8-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-8-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-8-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-8-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-8-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-8-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-8-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-8-100">100</a></span>
<span class="normal"><a href="#__codelineno-8-101">101</a></span>
<span class="normal"><a href="#__codelineno-8-102">102</a></span>
<span class="normal"><a href="#__codelineno-8-103">103</a></span>
<span class="normal"><a href="#__codelineno-8-104">104</a></span>
<span class="normal"><a href="#__codelineno-8-105">105</a></span>
<span class="normal"><a href="#__codelineno-8-106">106</a></span>
<span class="normal"><a href="#__codelineno-8-107">107</a></span>
<span class="normal"><a href="#__codelineno-8-108">108</a></span>
<span class="normal"><a href="#__codelineno-8-109">109</a></span>
<span class="normal"><a href="#__codelineno-8-110">110</a></span>
<span class="normal"><a href="#__codelineno-8-111">111</a></span>
<span class="normal"><a href="#__codelineno-8-112">112</a></span>
<span class="normal"><a href="#__codelineno-8-113">113</a></span>
<span class="normal"><a href="#__codelineno-8-114">114</a></span>
<span class="normal"><a href="#__codelineno-8-115">115</a></span>
<span class="normal"><a href="#__codelineno-8-116">116</a></span>
<span class="normal"><a href="#__codelineno-8-117">117</a></span>
<span class="normal"><a href="#__codelineno-8-118">118</a></span>
<span class="normal"><a href="#__codelineno-8-119">119</a></span>
<span class="normal"><a href="#__codelineno-8-120">120</a></span>
<span class="normal"><a href="#__codelineno-8-121">121</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-88" name="__codelineno-8-88"></a><span class="kd">const</span><span class="w"> </span><span class="nx">catDogTrials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-89" name="__codelineno-8-89"></a><span class="w">  </span><span class="nx">timeline</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<a id="__codelineno-8-90" name="__codelineno-8-90"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-91" name="__codelineno-8-91"></a><span class="w">      </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychHtmlKeyboardResponse</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-92" name="__codelineno-8-92"></a><span class="w">      </span><span class="nx">stimulus</span><span class="o">:</span><span class="w"> </span><span class="sb">`&lt;div style=&quot;font-size: 60px;&quot;&gt;+&lt;/div&gt;`</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-93" name="__codelineno-8-93"></a><span class="w">      </span><span class="nx">choices</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;NO_KEYS&#39;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-94" name="__codelineno-8-94"></a><span class="w">      </span><span class="nx">trial_duration</span><span class="o">:</span><span class="w"> </span><span class="mf">500</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-95" name="__codelineno-8-95"></a><span class="w">    </span><span class="p">},</span><span class="w"></span>
<a id="__codelineno-8-96" name="__codelineno-8-96"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-97" name="__codelineno-8-97"></a><span class="hll"><span class="w">      </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychHtmlKeyboardResponse</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-8-98" name="__codelineno-8-98"></a><span class="w">      </span><span class="nx">stimulus</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsych</span><span class="p">.</span><span class="nx">timelineVariable</span><span class="p">(</span><span class="s1">&#39;target&#39;</span><span class="p">),</span><span class="w"></span>
<a id="__codelineno-8-99" name="__codelineno-8-99"></a><span class="w">      </span><span class="nx">choices</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;ArrowLeft&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ArrowRight&#39;</span><span class="p">],</span><span class="w"></span>
<a id="__codelineno-8-100" name="__codelineno-8-100"></a><span class="w">      </span><span class="nx">prompt</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span>
<a id="__codelineno-8-101" name="__codelineno-8-101"></a><span class="sb">        &lt;p&gt;Is this a cat or a dog?&lt;/p&gt;</span>
<a id="__codelineno-8-102" name="__codelineno-8-102"></a><span class="sb">        &lt;p&gt;If cat, press the left arrow key.&lt;/p&gt;</span>
<a id="__codelineno-8-103" name="__codelineno-8-103"></a><span class="sb">        &lt;p&gt;If dog, press the right arrow key.&lt;/p&gt;</span>
<a id="__codelineno-8-104" name="__codelineno-8-104"></a><span class="sb">        `</span><span class="w"></span>
<a id="__codelineno-8-105" name="__codelineno-8-105"></a><span class="w">      </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-8-106" name="__codelineno-8-106"></a><span class="w">        </span><span class="c1">// Here is where we specify that this trial is a test response trial</span><span class="w"></span>
<a id="__codelineno-8-107" name="__codelineno-8-107"></a><span class="w">        </span><span class="nx">task</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test_response&#39;</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-108" name="__codelineno-8-108"></a><span class="w">        </span><span class="c1">// Here we can also specify additional information that we would like stored</span><span class="w"></span>
<a id="__codelineno-8-109" name="__codelineno-8-109"></a><span class="w">        </span><span class="c1">// in this trial in ROAR&#39;s Firestore database. For example,</span><span class="w"></span>
<a id="__codelineno-8-110" name="__codelineno-8-110"></a><span class="w">        </span><span class="nx">start_time</span><span class="o">:</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">startTime</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">(</span><span class="s1">&#39;PST&#39;</span><span class="p">),</span><span class="w"></span>
<a id="__codelineno-8-111" name="__codelineno-8-111"></a><span class="w">        </span><span class="nx">start_time_unix</span><span class="o">:</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">startTime</span><span class="p">.</span><span class="nx">getTime</span><span class="p">(),</span><span class="w"></span>
<a id="__codelineno-8-112" name="__codelineno-8-112"></a><span class="w">        </span><span class="nx">timezone</span><span class="o">:</span><span class="w"> </span><span class="nb">Intl</span><span class="p">.</span><span class="nx">DateTimeFormat</span><span class="p">().</span><span class="nx">resolvedOptions</span><span class="p">().</span><span class="nx">timeZone</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-8-113" name="__codelineno-8-113"></a><span class="w">      </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-8-114" name="__codelineno-8-114"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-8-115" name="__codelineno-8-115"></a><span class="w">  </span><span class="p">],</span><span class="w"></span>
<a id="__codelineno-8-116" name="__codelineno-8-116"></a><span class="hll"><span class="w">  </span><span class="nx">timeline_variables</span><span class="o">:</span><span class="w"> </span><span class="nx">block2Targets</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-8-117" name="__codelineno-8-117"></a><span class="hll"><span class="w">  </span><span class="nx">sample</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><a id="__codelineno-8-118" name="__codelineno-8-118"></a><span class="hll"><span class="w">    </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;without-replacement&#39;</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-8-119" name="__codelineno-8-119"></a><span class="hll"><span class="w">    </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-8-120" name="__codelineno-8-120"></a><span class="hll"><span class="w">  </span><span class="p">},</span><span class="w"></span>
</span><a id="__codelineno-8-121" name="__codelineno-8-121"></a><span class="p">};</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<p><script id="asciicast-Hk9TDXjdOLudCfL4TPzLlSb3X" src="https://asciinema.org/a/Hk9TDXjdOLudCfL4TPzLlSb3X.js" async></script></p>
</div>
</div>
</div>
<h3 id="ending-the-experiment">Ending the experiment<a class="headerlink" href="#ending-the-experiment" title="Permanent link">&para;</a></h3>
<p>We've added the second block of stimuli. Right now, the experiment abruptly ends after the last stimulus. It's a good idea to let your participants know that they've finished the experiment. Let's add one last trial telling the participant that they are done.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">code only</label><label for="__tabbed_6_2">screencast</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Add one more trial and push it to the timeline before the <code>exit_fullscreen</code> trial.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/index.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-120">120</a></span>
<span class="normal"><a href="#__codelineno-9-121">121</a></span>
<span class="normal"><a href="#__codelineno-9-122">122</a></span>
<span class="normal"><a href="#__codelineno-9-123">123</a></span>
<span class="normal"><a href="#__codelineno-9-124">124</a></span>
<span class="normal"><a href="#__codelineno-9-125">125</a></span>
<span class="normal"><a href="#__codelineno-9-126">126</a></span>
<span class="normal"><a href="#__codelineno-9-127">127</a></span>
<span class="normal"><a href="#__codelineno-9-128">128</a></span>
<span class="normal"><a href="#__codelineno-9-129">129</a></span>
<span class="normal"><a href="#__codelineno-9-130">130</a></span>
<span class="normal"><a href="#__codelineno-9-131">131</a></span>
<span class="normal"><a href="#__codelineno-9-132">132</a></span>
<span class="normal"><a href="#__codelineno-9-133">133</a></span>
<span class="normal"><a href="#__codelineno-9-134">134</a></span>
<span class="normal"><a href="#__codelineno-9-135">135</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-120" name="__codelineno-9-120"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">endTrial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><a id="__codelineno-9-121" name="__codelineno-9-121"></a><span class="hll"><span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychHtmlKeyboardResponse</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-9-122" name="__codelineno-9-122"></a><span class="hll"><span class="w">  </span><span class="nx">stimulus</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;p&gt;Great job! Press any key to finish the assessment.&lt;/p&gt;&#39;</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-9-123" name="__codelineno-9-123"></a><span class="hll"><span class="w">  </span><span class="nx">choices</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ALL_KEYS&#39;</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-9-124" name="__codelineno-9-124"></a><span class="hll"><span class="w">  </span><span class="nx">response_ends_trial</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
</span><a id="__codelineno-9-125" name="__codelineno-9-125"></a><span class="hll"><span class="p">};</span><span class="w"></span>
</span><a id="__codelineno-9-126" name="__codelineno-9-126"></a><span class="hll">
</span><a id="__codelineno-9-127" name="__codelineno-9-127"></a><span class="hll"><span class="nx">timeline</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">endTrial</span><span class="p">);</span><span class="w"></span>
</span><a id="__codelineno-9-128" name="__codelineno-9-128"></a>
<a id="__codelineno-9-129" name="__codelineno-9-129"></a><span class="kd">const</span><span class="w"> </span><span class="nx">exit_fullscreen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-9-130" name="__codelineno-9-130"></a><span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychFullScreen</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-131" name="__codelineno-9-131"></a><span class="w">  </span><span class="nx">fullscreen_mode</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-132" name="__codelineno-9-132"></a><span class="w">  </span><span class="nx">delay_after</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-9-133" name="__codelineno-9-133"></a><span class="p">};</span><span class="w"></span>
<a id="__codelineno-9-134" name="__codelineno-9-134"></a>
<a id="__codelineno-9-135" name="__codelineno-9-135"></a><span class="nx">timeline</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">exit_fullscreen</span><span class="p">);</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<p><script id="asciicast-npcPshy7MAWkNTQDOUEFHXHVe" src="https://asciinema.org/a/npcPshy7MAWkNTQDOUEFHXHVe.js" async></script></p>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">How to properly end your assessment</p>
<p>Be sure to give your participant concrete instructions for how to end the assessment. In this case, we told them to "press any key to finish the assessment." If you don't, then the participant might think that they are done and simply close the browser tab. Why is this bad? Although all of the trial information will be saved in the database, the assessment will not be counted as finished (either in the database or in the participant dashboard) because the jsPsych timeline did not complete.</p>
<p>If you want to use any of jsPsych's audio plugins (e.g., <a href="https://www.jspsych.org/7.0/plugins/audio-button-response/">audio-button-response</a> or <a href="https://www.jspsych.org/7.0/plugins/audio-keyboard-response/">audio-keyboard-response</a>) to end the assessment
be sure to specify <code>trial_ends_after_audio: true</code> so that the experiment automatically ends after the last audio file is played.
Likewise, if you want to use any video plugins (e.g., <a href="https://www.jspsych.org/7.0/plugins/video-button-response/">video-button-response</a> or
<a href="https://www.jspsych.org/7.0/plugins/video-keyboard-response/">video-keyboard-response</a>), be sure to specify <code>trial_ends_after_video: true</code> so that the experiment automatically ends after the last video.</p>
<p>The guiding principle here is to ensure that the jsPsych timeline ends before the participant closes their browser tab.</p>
</div>
<h2 id="advice-for-asset-files">Advice for asset files<a class="headerlink" href="#advice-for-asset-files" title="Permanent link">&para;</a></h2>
<p>Please see <a href="../../common-issues/asset-files/">Common Issues &gt; Advice For Asset Files</a>.</p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../configuration/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Configuration" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Configuration
            </div>
          </div>
        </a>
      
      
        
        <a href="../installing-dependencies/" class="md-footer__link md-footer__link--next" aria-label="Next: Installing Additional Dependencies" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Installing Additional Dependencies
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 <a href="https://richiehalford.org">Adam Richie-Halford</a>, Maintained by the <a href="https://www.brainandeducation.com/">Brain Development and Education Lab</a>.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.tracking", "navigation.expand", "navigation.indexes", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.078830c0.min.js"></script>
      
    
  </body>
</html>