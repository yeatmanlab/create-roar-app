
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A guide for developing ROAR apps">
      
      
        <meta name="author" content="Adam Richie-Halford">
      
      
        <link rel="canonical" href="https://yeatmanlab.github.io/create-roar-app/developer-guide/configuration/">
      
      
        <link rel="prev" href="../folder-structure/">
      
      
        <link rel="next" href="../writing-your-experiment/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Configuration - ROAR Developer's Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
      
      
    
  
  
  <style>:root{--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M13.22%2019.03a.75.75%200%200%201%200-1.06L18.19%2013H3.75a.75.75%200%200%201%200-1.5h14.44l-4.97-4.97a.749.749%200%200%201%20.326-1.275.75.75%200%200%201%20.734.215l6.25%206.25a.75.75%200%200%201%200%201.06l-6.25%206.25a.75.75%200%200%201-1.06%200%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="stanford" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration-under-the-hood" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ROAR Developer&#39;s Guide" class="md-header__button md-logo" aria-label="ROAR Developer's Guide" data-md-component="logo">
      
  <img src="../../assets/roar-icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROAR Developer's Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/yeatmanlab/create-roar-app/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ROAR Developer&#39;s Guide" class="md-nav__button md-logo" aria-label="ROAR Developer's Guide" data-md-component="logo">
      
  <img src="../../assets/roar-icon.png" alt="logo">

    </a>
    ROAR Developer's Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/yeatmanlab/create-roar-app/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Developer Guide
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prerequisites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prerequisites
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../folder-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Folder Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#communicate-with-the-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      
        Communicate with the dashboard
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keep-track-of-changes-to-your-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Keep track of changes to your task
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connect-to-the-firestore-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connect to the Firestore database
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#write-trial-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        Write trial data
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../writing-your-experiment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Writing Your Experiment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installing-dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installing Additional Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../styling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Styling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deploying-your-experiment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deploying Your Experiment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../retrieving-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieving Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Common Issues
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Common Issues
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../common-issues/asset-files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advice For Asset Files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../common-issues/audio-stimuli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mobile Friendly Audio Stimuli
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    About
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#communicate-with-the-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      
        Communicate with the dashboard
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keep-track-of-changes-to-your-task" class="md-nav__link">
    <span class="md-ellipsis">
      
        Keep track of changes to your task
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connect-to-the-firestore-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connect to the Firestore database
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#write-trial-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        Write trial data
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="configuration-under-the-hood">Configuration (under the hood)<a class="headerlink" href="#configuration-under-the-hood" title="Permanent link">&para;</a></h1>
<p>Communicate with the Firestore database and the participant dashboard.</p>
<hr />
<p>ROAR apps work in concert with the <a href="https://reading.stanford.edu/">participant dashboard</a> and the Firestore database to collect participant information and store <abbr title="a single stimulus/response pair">trial</abbr> data, respectively.</p>
<p>The details of these interactions have been deliberately abstracted away from you and put "under the hood" in <code>src/config.js</code>. In this section, we will explain what you need to do to make your ROAR apps communicate with the dashboard and the database. We will also <strong>optionally</strong> dive deeper into <code>src/config.js</code> to gain an understanding of how this works.</p>
<h2 id="communicate-with-the-dashboard">Communicate with the dashboard<a class="headerlink" href="#communicate-with-the-dashboard" title="Permanent link">&para;</a></h2>
<!-- markdownlint-disable MD034 -->
<p>The participant dashboard provides a unified login experience and helps participants monitor their progress on multiple ROAR assessments.
The dashboard keeps track of ROAR apps by assigned each one a unique number called a "game token".
ROAR apps and the dashboard communicate with each other by passing parameters through the <a href="https://en.wikipedia.org/wiki/Query_string">URL's query string</a>.
Suppose that your app is hosted at the website https://my-roar-app.web.app. The dashboard can be made to append a "gameToken" parameter. For example, https://my-roar-app.web.app?gameToken=1234 for the assessment associated with the game token "1234".</p>
<p>You might be asking, "what does my ROAR app do with this information?"
Well, when your assessment is done, it usually redirects the participant back to the dashboard. It has to let the dashboard know somehow that the participant has completed the game. ROAR apps solve this problem using the same query string technology, passing URL parameters for a game token, "g", and a completion status, "c". For example, redirecting the user to https://reading.stanford.edu/?g=1234&amp;c=1 would communicate to the dashboard that the participant has completed the game with game token 1234. If no game token URL parameter is given to a ROAR app, it's default behavior is to refresh the page after the assessment is done.</p>
<div class="admonition note">
<p class="admonition-title">What you need to do</p>
<p>When you register your ROAR app in the participant dashboard, you <strong>must</strong> append a "gameToken" URL parameter. The value of this parameter must match the game token that the dashboard uses for your assessment.</p>
</div>
<details class="example">
<summary>Implementation details</summary>
<p>There are lines of JavaScript code in <code>config.js</code> that inspect the "gameToken" parameter of the URL query string and construct the appropriate redirect URL to communicate back with the dashboard. You <strong>DO NOT</strong> need to edit this code.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/config.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="kd">const</span><span class="w"> </span><span class="nx">queryString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URL</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">).</span><span class="nx">search</span><span class="p">;</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="kd">const</span><span class="w"> </span><span class="nx">urlParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">(</span><span class="nx">queryString</span><span class="p">);</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="kd">const</span><span class="w"> </span><span class="nx">gameToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">urlParams</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;gameToken&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="kd">const</span><span class="w"> </span><span class="nx">redirect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">gameToken</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="w">    </span><span class="c1">// If no game token was passed, we refresh the page rather than</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="w">    </span><span class="c1">// redirecting back to the dashboard</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="w">    </span><span class="c1">// Else, redirect back to the dashboard with the game token that</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="w">    </span><span class="c1">// was originally provided</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`https://reading.stanford.edu/?g=</span><span class="si">${</span><span class="nx">gameToken</span><span class="si">}</span><span class="sb">&amp;c=1`</span><span class="p">;</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
</details>
<h2 id="keep-track-of-changes-to-your-task">Keep track of changes to your <abbr title="another name for a ROAR assessment (e.g., ROAR-SWR, ROAR-MEP, etc.)">task</abbr><a class="headerlink" href="#keep-track-of-changes-to-your-task" title="Permanent link">&para;</a></h2>
<p>During the <a href="../installation/">installation phase</a>, you entered some details about your <abbr title="another name for a ROAR assessment (e.g., ROAR-SWR, ROAR-MEP, etc.)">task</abbr>. We stored this metadata inside of <code>src/config.js</code> and it will be written to the Firestore database whenever a participant takes your assessment.</p>
<p>This helps you keep track of which <abbr title="another name for a ROAR assessment (e.g., ROAR-SWR, ROAR-MEP, etc.)">task</abbr> your participant is taking. Furthermore, your ROAR app also keeps track of variations in your <abbr title="another name for a ROAR assessment (e.g., ROAR-SWR, ROAR-MEP, etc.)">task</abbr> by assigning a new <abbr title="a specific variation of a task (e.g., adaptive vs. random)">variant</abbr> every time you change your source code.</p>
<div class="admonition note">
<p class="admonition-title">What you need to do</p>
<p>Nothing!</p>
</div>
<details class="example">
<summary>Implementation details</summary>
<p>There are lines of JavaScript code in <code>config.js</code> that insert your <abbr title="another name for a ROAR assessment (e.g., ROAR-SWR, ROAR-MEP, etc.)">task</abbr> metadata into an object that is later passed to the Firestore database.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/config.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="kd">function</span><span class="w"> </span><span class="nx">configTaskInfo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">taskInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">    </span><span class="nx">taskId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;my-roar-app&#39;</span><span class="p">,</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">    </span><span class="nx">taskName</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;My Roar App&#39;</span><span class="p">,</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">    </span><span class="nx">variantName</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;default&#39;</span><span class="p">,</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">    </span><span class="nx">taskDescription</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;An example ROAR app using the two-alternative forced choice template&#39;</span><span class="p">,</span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">    </span><span class="nx">variantDescription</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;default&#39;</span><span class="p">,</span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">    </span><span class="c1">// eslint-disable-next-line no-undef</span>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">    </span><span class="nx">srcHash</span><span class="o">:</span><span class="w"> </span><span class="nx">SRC_HASH</span><span class="p">,</span>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-1-21" name="__codelineno-1-21"></a>
<a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">taskInfo</span><span class="p">;</span>
<a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>That <code>SRC_HASH</code> variable on line 19 contains a hash of your entire <code>src</code> directory. It is calculated in the <code>webpack.config.js</code> file and then inserted into your JavaScript files as a global variable every time you use <code>npm run build</code> or <code>npm start</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">webpack.config.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-109">109</a></span>
<span class="normal"><a href="#__codelineno-2-110">110</a></span>
<span class="normal"><a href="#__codelineno-2-111">111</a></span>
<span class="normal"><a href="#__codelineno-2-112">112</a></span>
<span class="normal"><a href="#__codelineno-2-113">113</a></span>
<span class="normal"><a href="#__codelineno-2-114">114</a></span>
<span class="normal"><a href="#__codelineno-2-115">115</a></span>
<span class="normal"><a href="#__codelineno-2-116">116</a></span>
<span class="normal"><a href="#__codelineno-2-117">117</a></span>
<span class="normal"><a href="#__codelineno-2-118">118</a></span>
<span class="normal"><a href="#__codelineno-2-119">119</a></span>
<span class="normal"><a href="#__codelineno-2-120">120</a></span>
<span class="normal"><a href="#__codelineno-2-121">121</a></span>
<span class="normal"><a href="#__codelineno-2-122">122</a></span>
<span class="normal"><a href="#__codelineno-2-123">123</a></span>
<span class="normal"><a href="#__codelineno-2-124">124</a></span>
<span class="normal"><a href="#__codelineno-2-125">125</a></span>
<span class="normal"><a href="#__codelineno-2-126">126</a></span>
<span class="normal"><a href="#__codelineno-2-127">127</a></span>
<span class="normal"><a href="#__codelineno-2-128">128</a></span>
<span class="normal"><a href="#__codelineno-2-129">129</a></span>
<span class="normal"><a href="#__codelineno-2-130">130</a></span>
<span class="normal"><a href="#__codelineno-2-131">131</a></span>
<span class="normal"><a href="#__codelineno-2-132">132</a></span>
<span class="normal"><a href="#__codelineno-2-133">133</a></span>
<span class="normal"><a href="#__codelineno-2-134">134</a></span>
<span class="normal"><a href="#__codelineno-2-135">135</a></span>
<span class="normal"><a href="#__codelineno-2-136">136</a></span>
<span class="normal"><a href="#__codelineno-2-137">137</a></span>
<span class="normal"><a href="#__codelineno-2-138">138</a></span>
<span class="normal"><a href="#__codelineno-2-139">139</a></span>
<span class="normal"><a href="#__codelineno-2-140">140</a></span>
<span class="normal"><a href="#__codelineno-2-141">141</a></span>
<span class="normal"><a href="#__codelineno-2-142">142</a></span>
<span class="normal"><a href="#__codelineno-2-143">143</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-109" name="__codelineno-2-109"></a><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">env</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-110" name="__codelineno-2-110"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">hashOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-2-111" name="__codelineno-2-111"></a><span class="hll"><span class="w">    </span><span class="nx">folders</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">exclude</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;.*&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;node_modules&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;test_coverage&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
</span><a id="__codelineno-2-112" name="__codelineno-2-112"></a><span class="hll"><span class="w">    </span><span class="nx">files</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">include</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;*.js&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;*.json&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
</span><a id="__codelineno-2-113" name="__codelineno-2-113"></a><span class="hll"><span class="w">  </span><span class="p">};</span>
</span><a id="__codelineno-2-114" name="__codelineno-2-114"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">srcHash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">hashElement</span><span class="p">(</span><span class="s1">&#39;./src&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">hashOptions</span><span class="p">);</span>
</span><a id="__codelineno-2-115" name="__codelineno-2-115"></a>
<a id="__codelineno-2-116" name="__codelineno-2-116"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">roarDbDoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">env</span><span class="p">.</span><span class="nx">dbmode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;production&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;production&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;development&#39;</span><span class="p">;</span>
<a id="__codelineno-2-117" name="__codelineno-2-117"></a>
<a id="__codelineno-2-118" name="__codelineno-2-118"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">merged</span><span class="p">;</span>
<a id="__codelineno-2-119" name="__codelineno-2-119"></a><span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-120" name="__codelineno-2-120"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;development&#39;</span><span class="o">:</span>
<a id="__codelineno-2-121" name="__codelineno-2-121"></a><span class="w">      </span><span class="nx">merged</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">merge</span><span class="p">(</span><span class="nx">commonConfig</span><span class="p">,</span><span class="w"> </span><span class="nx">developmentConfig</span><span class="p">);</span>
<a id="__codelineno-2-122" name="__codelineno-2-122"></a><span class="w">      </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-2-123" name="__codelineno-2-123"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;production&#39;</span><span class="o">:</span>
<a id="__codelineno-2-124" name="__codelineno-2-124"></a><span class="w">      </span><span class="nx">merged</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">merge</span><span class="p">(</span><span class="nx">commonConfig</span><span class="p">,</span><span class="w"> </span><span class="nx">productionConfig</span><span class="p">);</span>
<a id="__codelineno-2-125" name="__codelineno-2-125"></a><span class="w">      </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-2-126" name="__codelineno-2-126"></a><span class="w">    </span><span class="k">default</span><span class="o">:</span>
<a id="__codelineno-2-127" name="__codelineno-2-127"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;No matching configuration was found!&#39;</span><span class="p">);</span>
<a id="__codelineno-2-128" name="__codelineno-2-128"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-2-129" name="__codelineno-2-129"></a>
<a id="__codelineno-2-130" name="__codelineno-2-130"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">merge</span><span class="p">(</span>
<a id="__codelineno-2-131" name="__codelineno-2-131"></a><span class="w">    </span><span class="nx">merged</span><span class="p">,</span>
<a id="__codelineno-2-132" name="__codelineno-2-132"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-2-133" name="__codelineno-2-133"></a><span class="w">      </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-2-134" name="__codelineno-2-134"></a><span class="w">        </span><span class="ow">new</span><span class="w"> </span><span class="nx">HtmlWebpackPlugin</span><span class="p">({</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;My Roar App&#39;</span><span class="w"> </span><span class="p">}),</span>
<a id="__codelineno-2-135" name="__codelineno-2-135"></a><span class="w">        </span><span class="ow">new</span><span class="w"> </span><span class="nx">webpack</span><span class="p">.</span><span class="nx">ids</span><span class="p">.</span><span class="nx">HashedModuleIdsPlugin</span><span class="p">(),</span><span class="w"> </span><span class="c1">// so that file hashes don&#39;t change unexpectedly</span>
<a id="__codelineno-2-136" name="__codelineno-2-136"></a><span class="w">        </span><span class="ow">new</span><span class="w"> </span><span class="nx">webpack</span><span class="p">.</span><span class="nx">DefinePlugin</span><span class="p">({</span>
<a id="__codelineno-2-137" name="__codelineno-2-137"></a><span class="w">          </span><span class="nx">ROAR_DB_DOC</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">roarDbDoc</span><span class="p">),</span>
<a id="__codelineno-2-138" name="__codelineno-2-138"></a><span class="hll"><span class="w">          </span><span class="nx">SRC_HASH</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">srcHash</span><span class="p">),</span>
</span><a id="__codelineno-2-139" name="__codelineno-2-139"></a><span class="w">        </span><span class="p">}),</span>
<a id="__codelineno-2-140" name="__codelineno-2-140"></a><span class="w">      </span><span class="p">],</span>
<a id="__codelineno-2-141" name="__codelineno-2-141"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-2-142" name="__codelineno-2-142"></a><span class="w">  </span><span class="p">);</span>
<a id="__codelineno-2-143" name="__codelineno-2-143"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
</details>
<h2 id="connect-to-the-firestore-database">Connect to the Firestore database<a class="headerlink" href="#connect-to-the-firestore-database" title="Permanent link">&para;</a></h2>
<p>ROAR apps store each <abbr title="a single stimulus/response pair">trial</abbr>'s data in a <a href="https://firebase.google.com/docs/firestore">Firestore database</a>. In order to communicate with Firebase, your app needs to know certain metadata about your Firebase project. If you are developing an app for the <a href="https://www.brainandeducation.com/">Brain Development and Education Lab (BDELab)</a>, then you don't have to do anything because the correct metadata has already been filled in. If you're developing for another organization, you'll have to supply your <a href="https://firebase.google.com/docs/web/learn-more#config-object">Firebase project configuration</a> in the <code>src/firebaseConfig.js</code> file.</p>
<p>The BDELab's Firestore database has separate collections for development and production data. So while you are developing your app, any <abbr title="a single stimulus/response pair">trial</abbr> data that you produce is kept separate from the experimental data of our in-production apps. Once you are ready to deploy your experiment in production, you're data will be stored in the production part of the database. By default, the development data will be stored in "<a href="https://console.firebase.google.com/project/gse-yeatmanlab/firestore/data/~2Fdev~2Fmy-roar-app"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg></span> <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M311.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L243.2 256 73.9 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg></span> dev <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M311.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L243.2 256 73.9 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg></span> my-roar-app</a>", where the last element of that path will depend on the name that you gave to your ROAR app during installation. When deployed, your assessment data will be stored in "<a href="https://console.firebase.google.com/project/gse-yeatmanlab/firestore/data/~2Fprod~2Froar-prod"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg></span> <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M311.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L243.2 256 73.9 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg></span> prod <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M311.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L243.2 256 73.9 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg></span> roar-prod</a>."</p>
<div class="admonition note">
<p class="admonition-title">What you need to do</p>
<p>If you are storing your data in your own Firestore database, supply your <a href="https://firebase.google.com/docs/web/learn-more#config-object">Firebase project configuration</a> in the <code>src/firebaseConfig.js</code> file. If you are developing for the BDELab, this step isn't necessary.</p>
<p>To switch between the production and development portions of the database, use the <code>:prod</code> and <code>:dev</code> versions of the <code>npm run</code> commands. For example, <code>npm run build:dev</code> will build your app in the <code>dist</code> folder and configure it to store data in the development portion of the database. Conversely, <code>npm run build:prod</code> will configure it to write to the production portion of the database. There are similar sub-commands for <code>npm run start</code>.</p>
<p>Lastly, if you type <code>npm start</code> or <code>npm run build</code> on their own without specifying <code>:prod</code> or <code>:dev</code>, the default behavior is to write to the development portion of the database.</p>
</div>
<details class="example">
<summary>Implementation details</summary>
<p>The "scripts" portion of <code>package.json</code> contains the specialized <code>:prod</code> and <code>:dev</code> commands. Using <code>:prod</code> tells webpack to set the <code>dbmode</code> environment variable to "production", while using <code>:dev</code> sets that variable to "development."</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">package.json</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">  </span><span class="s2">&quot;scripts&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">    </span><span class="s2">&quot;test&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="p">,</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">    </span><span class="s2">&quot;build&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;npx webpack --mode production&quot;</span><span class="p">,</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="hll"><span class="w">    </span><span class="s2">&quot;build:dev&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;npm run build -- --env dbmode=development&quot;</span><span class="p">,</span>
</span><a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="hll"><span class="w">    </span><span class="s2">&quot;build:prod&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;npm run build -- --env dbmode=production&quot;</span><span class="p">,</span>
</span><a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">    </span><span class="s2">&quot;start&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;npx webpack serve --open --mode development&quot;</span><span class="p">,</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="hll"><span class="w">    </span><span class="s2">&quot;start:dev&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;npm run start -- --env dbmode=development&quot;</span><span class="p">,</span>
</span><a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="hll"><span class="w">    </span><span class="s2">&quot;start:prod&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;npm run start -- --env dbmode=production&quot;</span>
</span><a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="w">  </span><span class="p">},</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">webpack.config.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-109">109</a></span>
<span class="normal"><a href="#__codelineno-4-110">110</a></span>
<span class="normal"><a href="#__codelineno-4-111">111</a></span>
<span class="normal"><a href="#__codelineno-4-112">112</a></span>
<span class="normal"><a href="#__codelineno-4-113">113</a></span>
<span class="normal"><a href="#__codelineno-4-114">114</a></span>
<span class="normal"><a href="#__codelineno-4-115">115</a></span>
<span class="normal"><a href="#__codelineno-4-116">116</a></span>
<span class="normal"><a href="#__codelineno-4-117">117</a></span>
<span class="normal"><a href="#__codelineno-4-118">118</a></span>
<span class="normal"><a href="#__codelineno-4-119">119</a></span>
<span class="normal"><a href="#__codelineno-4-120">120</a></span>
<span class="normal"><a href="#__codelineno-4-121">121</a></span>
<span class="normal"><a href="#__codelineno-4-122">122</a></span>
<span class="normal"><a href="#__codelineno-4-123">123</a></span>
<span class="normal"><a href="#__codelineno-4-124">124</a></span>
<span class="normal"><a href="#__codelineno-4-125">125</a></span>
<span class="normal"><a href="#__codelineno-4-126">126</a></span>
<span class="normal"><a href="#__codelineno-4-127">127</a></span>
<span class="normal"><a href="#__codelineno-4-128">128</a></span>
<span class="normal"><a href="#__codelineno-4-129">129</a></span>
<span class="normal"><a href="#__codelineno-4-130">130</a></span>
<span class="normal"><a href="#__codelineno-4-131">131</a></span>
<span class="normal"><a href="#__codelineno-4-132">132</a></span>
<span class="normal"><a href="#__codelineno-4-133">133</a></span>
<span class="normal"><a href="#__codelineno-4-134">134</a></span>
<span class="normal"><a href="#__codelineno-4-135">135</a></span>
<span class="normal"><a href="#__codelineno-4-136">136</a></span>
<span class="normal"><a href="#__codelineno-4-137">137</a></span>
<span class="normal"><a href="#__codelineno-4-138">138</a></span>
<span class="normal"><a href="#__codelineno-4-139">139</a></span>
<span class="normal"><a href="#__codelineno-4-140">140</a></span>
<span class="normal"><a href="#__codelineno-4-141">141</a></span>
<span class="normal"><a href="#__codelineno-4-142">142</a></span>
<span class="normal"><a href="#__codelineno-4-143">143</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-109" name="__codelineno-4-109"></a><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">env</span><span class="p">,</span><span class="w"> </span><span class="nx">args</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-110" name="__codelineno-4-110"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">hashOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-111" name="__codelineno-4-111"></a><span class="w">    </span><span class="nx">folders</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">exclude</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;.*&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;node_modules&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;test_coverage&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-4-112" name="__codelineno-4-112"></a><span class="w">    </span><span class="nx">files</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">include</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;*.js&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;*.json&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-4-113" name="__codelineno-4-113"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-4-114" name="__codelineno-4-114"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">srcHash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">hashElement</span><span class="p">(</span><span class="s1">&#39;./src&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">hashOptions</span><span class="p">);</span>
<a id="__codelineno-4-115" name="__codelineno-4-115"></a>
<a id="__codelineno-4-116" name="__codelineno-4-116"></a><span class="hll"><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">roarDbDoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">env</span><span class="p">.</span><span class="nx">dbmode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;production&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;production&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;development&#39;</span><span class="p">;</span>
</span><a id="__codelineno-4-117" name="__codelineno-4-117"></a>
<a id="__codelineno-4-118" name="__codelineno-4-118"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">merged</span><span class="p">;</span>
<a id="__codelineno-4-119" name="__codelineno-4-119"></a><span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-120" name="__codelineno-4-120"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;development&#39;</span><span class="o">:</span>
<a id="__codelineno-4-121" name="__codelineno-4-121"></a><span class="w">      </span><span class="nx">merged</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">merge</span><span class="p">(</span><span class="nx">commonConfig</span><span class="p">,</span><span class="w"> </span><span class="nx">developmentConfig</span><span class="p">);</span>
<a id="__codelineno-4-122" name="__codelineno-4-122"></a><span class="w">      </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-4-123" name="__codelineno-4-123"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;production&#39;</span><span class="o">:</span>
<a id="__codelineno-4-124" name="__codelineno-4-124"></a><span class="w">      </span><span class="nx">merged</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">merge</span><span class="p">(</span><span class="nx">commonConfig</span><span class="p">,</span><span class="w"> </span><span class="nx">productionConfig</span><span class="p">);</span>
<a id="__codelineno-4-125" name="__codelineno-4-125"></a><span class="w">      </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-4-126" name="__codelineno-4-126"></a><span class="w">    </span><span class="k">default</span><span class="o">:</span>
<a id="__codelineno-4-127" name="__codelineno-4-127"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;No matching configuration was found!&#39;</span><span class="p">);</span>
<a id="__codelineno-4-128" name="__codelineno-4-128"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-4-129" name="__codelineno-4-129"></a>
<a id="__codelineno-4-130" name="__codelineno-4-130"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">merge</span><span class="p">(</span>
<a id="__codelineno-4-131" name="__codelineno-4-131"></a><span class="w">    </span><span class="nx">merged</span><span class="p">,</span>
<a id="__codelineno-4-132" name="__codelineno-4-132"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-4-133" name="__codelineno-4-133"></a><span class="w">      </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-4-134" name="__codelineno-4-134"></a><span class="w">        </span><span class="ow">new</span><span class="w"> </span><span class="nx">HtmlWebpackPlugin</span><span class="p">({</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;My Roar App&#39;</span><span class="w"> </span><span class="p">}),</span>
<a id="__codelineno-4-135" name="__codelineno-4-135"></a><span class="w">        </span><span class="ow">new</span><span class="w"> </span><span class="nx">webpack</span><span class="p">.</span><span class="nx">ids</span><span class="p">.</span><span class="nx">HashedModuleIdsPlugin</span><span class="p">(),</span><span class="w"> </span><span class="c1">// so that file hashes don&#39;t change unexpectedly</span>
<a id="__codelineno-4-136" name="__codelineno-4-136"></a><span class="w">        </span><span class="ow">new</span><span class="w"> </span><span class="nx">webpack</span><span class="p">.</span><span class="nx">DefinePlugin</span><span class="p">({</span>
<a id="__codelineno-4-137" name="__codelineno-4-137"></a><span class="hll"><span class="w">          </span><span class="nx">ROAR_DB_DOC</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">roarDbDoc</span><span class="p">),</span>
</span><a id="__codelineno-4-138" name="__codelineno-4-138"></a><span class="w">          </span><span class="nx">SRC_HASH</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">srcHash</span><span class="p">),</span>
<a id="__codelineno-4-139" name="__codelineno-4-139"></a><span class="w">        </span><span class="p">}),</span>
<a id="__codelineno-4-140" name="__codelineno-4-140"></a><span class="w">      </span><span class="p">],</span>
<a id="__codelineno-4-141" name="__codelineno-4-141"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-4-142" name="__codelineno-4-142"></a><span class="w">  </span><span class="p">);</span>
<a id="__codelineno-4-143" name="__codelineno-4-143"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>The <code>ROAR_DB_DOC</code> global variable is then used inside of <code>src/firebaseConfig.js</code> to set the root document in Firestore.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/firebaseConfig.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span>
<span class="normal"><a href="#__codelineno-5-5">5</a></span>
<span class="normal"><a href="#__codelineno-5-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="c1">// eslint-disable-next-line no-undef</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">prodDoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;your-org-name&#39;</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;yeatmanlab&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;prod&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;roar-prod&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;external&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;your-org-name&#39;</span><span class="p">];</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="c1">// eslint-disable-next-line no-undef</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">rootDoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ROAR_DB_DOC</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;production&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">prodDoc</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;dev&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;my-roar-app&#39;</span><span class="p">];</span>
</span></code></pre></div></td></tr></table></div>
</details>
<h2 id="write-trial-data">Write <abbr title="a single stimulus/response pair">trial</abbr> data<a class="headerlink" href="#write-trial-data" title="Permanent link">&para;</a></h2>
<p>Now that the ROAR app is connected to the Firestore database, you're going to want to write some <abbr title="a single stimulus/response pair">trial</abbr> data to it. To do so, you <strong>MUST</strong> append a single <code class="highlight"><span class="nx">save_trial</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span></code> field to the data collected by a jsPsych <abbr title="a single stimulus/response pair">trial</abbr>.</p>
<div class="admonition note">
<p class="admonition-title">What you need to do</p>
<p>You <strong>MUST</strong> add specific data to any <abbr title="a single stimulus/response pair">trial</abbr> you want to save to the Firestore database. <a href="https://www.jspsych.org/7.0/overview/data/#adding-data-to-a-particular-trial-or-set-of-trials">Here are instructions</a> on how to add additional data to any jsPsych <abbr title="a single stimulus/response pair">trial</abbr>. In our case, we are required to add <code class="highlight"><span class="nx">save_trial</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span></code> to the <abbr title="a single stimulus/response pair">trial</abbr> data. For example,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">trialSavedToFirestore</span><span class="p">{</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="nx">jsPsychHtmlKeyboardResponse</span><span class="p">,</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="nx">stimulus</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Press y to save this trial to firestore&quot;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="nx">choices</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="hll"><span class="w">  </span><span class="c1">// Here is where we specify that we should save the trial to Firestore</span>
</span><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="hll"><span class="w">  </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="hll"><span class="w">    </span><span class="nx">save_trial</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="hll"><span class="w">  </span><span class="p">},</span>
</span><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="p">},</span>
</code></pre></div>
<p>In the template that we are using in this developer's guide, you can see that this is already done in <code>src/index.js</code> on lines 56-61.</p>
</div>
<details class="example">
<summary>Implementation details</summary>
<p>In <code>src/config.js</code>, we added <a href="https://www.jspsych.org/7.0/overview/events/">an event-related callback function</a> to every single jsPsych <abbr title="a single stimulus/response pair">trial</abbr>. It gets called after the data gets updated and checks to see if the <code>save_trial</code> field is <code>true</code>. If so, it combines the <abbr title="a single stimulus/response pair">trial</abbr> data with some predefined timing and user data and writes it to the Firestore database using the <a href="https://richiehalford.org/roar-firekit/">roar-firekit</a> library.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/config.js</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-125">125</a></span>
<span class="normal"><a href="#__codelineno-7-126">126</a></span>
<span class="normal"><a href="#__codelineno-7-127">127</a></span>
<span class="normal"><a href="#__codelineno-7-128">128</a></span>
<span class="normal"><a href="#__codelineno-7-129">129</a></span>
<span class="normal"><a href="#__codelineno-7-130">130</a></span>
<span class="normal"><a href="#__codelineno-7-131">131</a></span>
<span class="normal"><a href="#__codelineno-7-132">132</a></span>
<span class="normal"><a href="#__codelineno-7-133">133</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-125" name="__codelineno-7-125"></a><span class="nx">jsPsych</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">on_data_update</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">extend</span><span class="p">(</span><span class="nx">jsPsych</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">on_data_update</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-126" name="__codelineno-7-126"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">save_trial</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-127" name="__codelineno-7-127"></a><span class="w">    </span><span class="nx">config</span><span class="p">.</span><span class="nx">firekit</span><span class="o">?</span><span class="p">.</span><span class="nx">writeTrial</span><span class="p">({</span>
<a id="__codelineno-7-128" name="__codelineno-7-128"></a><span class="w">      </span><span class="nx">timingData</span><span class="p">,</span>
<a id="__codelineno-7-129" name="__codelineno-7-129"></a><span class="w">      </span><span class="nx">userInfo</span><span class="o">:</span><span class="w"> </span><span class="nx">config</span><span class="p">.</span><span class="nx">firekit</span><span class="o">?</span><span class="p">.</span><span class="nx">userInfo</span><span class="p">,</span>
<a id="__codelineno-7-130" name="__codelineno-7-130"></a><span class="w">      </span><span class="p">...</span><span class="nx">data</span><span class="p">,</span>
<a id="__codelineno-7-131" name="__codelineno-7-131"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-7-132" name="__codelineno-7-132"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-7-133" name="__codelineno-7-133"></a><span class="p">});</span>
</code></pre></div></td></tr></table></div>
</details>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 <a href="https://richiehalford.org">Adam Richie-Halford</a>, Maintained by the <a href="https://www.brainandeducation.com/">Brain Development and Education Lab</a>.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.top", "navigation.tracking", "navigation.expand", "navigation.indexes", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>